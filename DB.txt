
CREATE DATABASE DB
USE DB
CREATE TABLE KhachHang
(
MaKH CHAR(5),
Ho NCHAR(10),
Ten NCHAR(20),
NgSinh DATE,
SoNha INT,
Duong NCHAR(20),
Phuong NCHAR(20),
Quan NCHAR(20),
Tpho NCHAR(20),
DienThoai INT,
PRIMARY KEY(MaKH)
);
CREATE TABLE HoaDon
(
MaHD CHAR(5),
MaKH CHAR(5),
NgayLap DATE,
TongTien INT,
PRIMARY KEY(MaHD)
);
CREATE TABLE CT_HoaDon
(
MaHD CHAR(5),
MaSP CHAR(5),
SoLuong INT,
GiaBan INT,	
GiaGiam INT,
ThanhTien INT,
PRIMARY KEY(MaHD,MaSP)
);
CREATE TABLE SanPham
(
MaSP CHAR(5),
TenSP NCHAR(20),
SoLuongTon INT,
MoTa NCHAR(20),
Gia INT,
PRIMARY KEY(MaSP)
);



ALTER TABLE HoaDon
ADD CONSTRAINT FK_HoaDonKhachHang
FOREIGN KEY (MaKH) REFERENCES KhachHang(MaKH);

ALTER TABLE CT_HoaDon
ADD CONSTRAINT FK_CT_HoaDonSanPham
FOREIGN KEY (MaSP) REFERENCES SanPham(MaSP);

ALTER TABLE CT_HoaDon
ADD CONSTRAINT FK_CT_HoaDonHoaDon
FOREIGN KEY (MaHD) REFERENCES HoaDon(MaHD);

